diff --git a/configs/model/appdim_mlp.yaml b/configs/model/appdim_mlp.yaml
index 1d6b585..0b9f99f 100644
--- a/configs/model/appdim_mlp.yaml
+++ b/configs/model/appdim_mlp.yaml
@@ -8,26 +8,35 @@ arch:
   roughness_rays: 200
   infinity_border: False
   appdim_noise_std: 0.0
-  world_bounces: 000
+  # world_bounces: 40000
+  # world_bounces: 2048000
   max_normal_similarity: 0.87
-  max_floater_loss: 1
-  cold_start_bg_iters: 0
+  cold_start_bg_iters: 000
+  attach_normal_iter: 0000
+  back_clip: 0.0
+
+  detach_inter: False
   selector:
     _target_: modules.pt_selectors.TopNWeight
     max_selected: 1500000
     bounces_per_ray: 1000
     weight_thres: 1e-3
-    eps: 1e-1
+
+  tonemap:
+    # _target_: models.tonemap.HDRTonemap
+    # _target_: models.tonemap.LinearTonemap
+    _target_: models.tonemap.SRGBTonemap
 
   sampler:
     _target_: samplers.continuous_alphagrid.ContinuousAlphagrid
     _partial_: True
     multiplier: 1
     shrink_iters: [2000, 4000]
     dynamic_batchsize: False
     sample_mode: multi_jitter
-    # test_sample_mode: midpoint
+    # sample_mode: single_jitter
+    test_sample_mode: midpoint
+    threshold: 0.00005
     grid_size: 128
     bound: 1.5
 
@@ -45,17 +54,10 @@ arch:
     # grid_size: 256
     # max_steps: 1024
 
-  rf: 'placeholder'
-
   brdf_sampler:
     _target_: models.brdf.GGXSampler
     _partial_: True
 
-  tonemap:
-    # _target_: models.tonemap.HDRTonemap
-    # _target_: models.tonemap.LinearTonemap
-    _target_: models.tonemap.SRGBTonemap
-
   brdf:
     _target_: models.brdf.MLPBRDF
     _partial_: True
@@ -72,24 +74,28 @@ arch:
     # featureC: 128
     num_layers: 4
     feape: 0
-    featureC: 64
-    # activation: 'softplus'
+    # dotpe: 0
+    # featureC: 64
+    dotpe: 6
+    featureC: 128
+    activation: 'softplus'
+    # activation: 'sigmoid'
     # activation: 'sigmoid'
-    activation: 'sigmoid'
     mul_ggx: False
     use_roughness: true
     detach_roughness: false
     lr: 1e-3
 
   bg_module:
     _target_: models.bg_modules.HierarchicalCubeMap
     bg_resolution: 1024
     mipbias: 0
     num_levels: 1
     activation: 'exp'
     power: 2
     stds: []
-    lr: 0.10
+    lr: 0.1
+    init_val: -2
     betas: [0.9, 0.999]
     mipbias_lr: 1e-4
     mipnoise: 0.5
@@ -97,40 +103,25 @@ arch:
   diffuse_module:
     _partial_: True
     _target_: models.render_modules.MLPDiffuse
-    pospe: 12
-    feape: 0
+    pospe: -1
+    feape: 2
+    # view_encoder:
+    #   _target_: models.render_modules.PE
+    #   max_degree: 2
     featureC: 128
     num_layers: 3
     lr: 1e-4
-
-  # diffuse_module:
-  #   _partial_: True
-  #   _target_: models.render_modules.PassthroughDiffuse
-
-  # normal_module:
-  #   _partial_: True
-  #   _target_: models.render_modules.AppDimNormal
+    # allocation: 7
 
   normal_module:
     _partial_: True
     _target_: models.render_modules.MLPNormal
     lr: 1e-3
-    pospe: 12
-    feape: 0
+    pospe: -1
+    feape: 2
     featureC: 128
-    # featureC: 64
-    num_layers: 4
-
-  # visibility_module:
-  #   _partial_: True
-  #   _target_: models.render_modules.VisibilityMLP
-  #   lr: 1e-3
-  #   view_encoder:
-  #     _target_: models.ish.ListISH
-  #     degs: [0,1,2,4]
-  #   feape: 0
-  #   featureC: 64
-  #   num_layers: 3
+    num_layers: 3
+    # allocation: 3
 
   visibility_module:
     _partial_: True
@@ -144,6 +135,8 @@ arch:
     # featureC: 64
     # num_layers: 3
 
+  rf: 'placeholder'
+
 params:
   L1_weight_inital: 8e-5
   L1_weight_rest: 4e-5
@@ -151,19 +144,15 @@ params:
   TV_weight_density: 0.0
   TV_weight_app: 0.0
   normal_lambda: 3e-3
-  diffuse_lambda: 0 #1e-5
+  diffuse_lambda: 0 #2e-4
   backwards_rays_lambda: 0.1
   floater_lambda: 1e-3
-  visibility_lambda: 20
-  N_visibility_rays: 128
+  visibility_lambda: 0
   # floater_lambda: 0.00001
   charbonier_eps: 1e-3
   ortho_weight: 0
+  N_visibility_rays: 128
 
-  envmap_train_start: 20
-  # num_rays_per_envmap: 512
-  num_rays_per_envmap: 64
-  num_env_train_iters: 0
   n_iters: 30000
   charbonier_loss: false
   start_density: 1e-3
