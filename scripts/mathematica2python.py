from sympy.parsing import mathematica, latex
from sympy import *
import math
import re

def mparse(s):
    s = re.sub('\.([^0-9])', r'\g<1>', s)
    s = s.replace('\\[Pi]', 'Pi')
    eq = mathematica.mathematica(s, {'Csch[x]': '1/Sinh[x]'})
    return eq

def sub_pows(eq):
    return (str(eq)
        .replace('x**2', 'xx')
        .replace('y**2', 'yy')
        .replace('z**2', 'zz')
        .replace('x**4', 'x4')
        .replace('y**4', 'y4')
        .replace('z**4', 'z4')
        .replace('x**6', 'x6')
        .replace('y**6', 'y6')
        .replace('z**6', 'z6')
        .replace('x**8', 'x8')
        .replace('y**8', 'y8')
        .replace('z**8', 'z8')
        .replace('x**10', 'x10')
        .replace('y**10', 'y10')
        .replace('z**10', 'z10')
        .replace('x**12', 'x12')
        .replace('y**12', 'y12')
        .replace('z**12', 'z12')
        .replace('x**14', 'x14')
        .replace('y**14', 'y14')
        .replace('z**14', 'z14')
        .replace('x**16', 'x16')
        .replace('y**16', 'y16')
        .replace('z**16', 'z16')
        )
    

eqs = '1.5451 x y,-1.5451 y z,0.315392 (-1.+3. z^2),-0.772548 x z,0.386274 (x^2-1. y^2)'
eqs = '3.54026 x y (x^2-1. y^2),2.50334 y (-3. x^2+y^2) z,1.33809 x y (-1.+7. z^2),0.946175 y z (3. -7. z^2),0.105786 (3. -30. z^2+35. z^4),0.473087 x z (3. -7. z^2),0.334523 (x^2-1. y^2) (-1.+7. z^2),-1.25167 x (x^2-3. y^2) z,0.442533 (x^4-6. x^2 y^2+y^4)'
eqs = '8.24686 x y (x^6-7. x^4 y^2+7. x^2 y^4-1. y^6),4.12343 y (-7. x^6+35. x^4 y^2-21. x^2 y^4+y^6) z,1.50566 x y (3. x^4-10. x^2 y^2+3. y^4) (-1.+15. z^2),-4.87891 y (5. x^4-10. x^2 y^2+y^4) z (-1.+5. z^2),2.70633 x y (x^2-1. y^2) (1. -26. z^2+65. z^4),1.74693 y (-3. x^2+y^2) z (3. -26. z^2+39. z^4),1.29019 x y (-1.+33. z^2-143. z^4+143. z^6),-0.154208 y z (-35.+385. z^2-1001. z^4+715. z^6),0.00908677 (35. -1260. z^2+6930. z^4-12012. z^6+6435. z^8),-0.0771038 x z (-35.+385. z^2-1001. z^4+715. z^6),0.322548 (x^2-1. y^2) (-1.+33. z^2-143. z^4+143. z^6),-0.873465 x (x^2-3. y^2) z (3. -26. z^2+39. z^4),0.338292 (x^4-6. x^2 y^2+y^4) (1. -26. z^2+65. z^4),-2.43946 x (x^4-10. x^2 y^2+5. y^4) z (-1.+5. z^2),0.376416 (x^6-15. x^4 y^2+15. x^2 y^4-1. y^6) (-1.+15. z^2),-2.06172 x (x^6-21. x^4 y^2+35. x^2 y^4-7. y^6) z,0.515429 (x^8-28. x^6 y^2+70. x^4 y^4-28. x^2 y^6+y^8)'
eqs = '19.3994 x y (x^14-35. x^12 y^2+273. x^10 y^4-715. x^8 y^6+715. x^6 y^8-273. x^4 y^10+35. x^2 y^12-1. y^14),6.85872 y (-15. x^14+455. x^12 y^2-3003. x^10 y^4+6435. x^8 y^6-5005. x^6 y^8+1365. x^4 y^10-105. x^2 y^12+y^14) z,1.74212 x y (7. x^12-182. x^10 y^2+1001. x^8 y^4-1716. x^6 y^6+1001. x^4 y^8-182. x^2 y^10+7. y^12) (-1.+31. z^2),-2.75453 y (13. x^12-286. x^10 y^2+1287. x^8 y^4-1716. x^6 y^6+715. x^4 y^8-78. x^2 y^10+y^12) z (-3.+31. z^2),1.02301 x y (3. x^10-55. x^8 y^2+198. x^6 y^4-198. x^4 y^6+55. x^2 y^8-3. y^10) (3. -174. z^2+899. z^4),0.605219 y (-11. x^10+165. x^8 y^2-462. x^6 y^4+330. x^4 y^6-55. x^2 y^8+y^10) z (15. -290. z^2+899. z^4),0.285303 x y (5. x^8-60. x^6 y^2+126. x^4 y^4-60. x^2 y^6+5. y^8) (-5.+405. z^2-3915. z^4+8091. z^6),-0.274925 y (9. x^8-84. x^6 y^2+126. x^4 y^4-36. x^2 y^6+y^8) z (-35.+945. z^2-5481. z^4+8091. z^6),0.777605 x y (x^6-7. x^4 y^2+7. x^2 y^4-1. y^6) (7. -700. z^2+9450. z^4-36540. z^6+40455. z^8),0.476184 y (-7. x^6+35. x^4 y^2-21. x^2 y^4+y^6) z (21. -700. z^2+5670. z^4-15660. z^6+13485. z^8),0.0627973 x y (3. x^4-10. x^2 y^2+3. y^4) (-21.+2415. z^2-40250. z^4+217350. z^6-450225. z^8+310155. z^10),-0.0444044 y (5. x^4-10. x^2 y^2+y^4) z (-231.+8855. z^2-88550. z^4+341550. z^6-550275. z^8+310155. z^10),0.234966 x y (x^2-1. y^2) (11. -1386. z^2+26565. z^4-177100. z^6+512325. z^8-660330. z^10+310155. z^12),0.0728598 y (-3. x^2+y^2) z (143. -6006. z^2+69069. z^4-328900. z^6+740025. z^8-780390. z^10+310155. z^12),0.00893464 x y (-143.+19019. z^2-399399. z^4+3.06206*10^6 z^6-1.09359*10^7 z^8+1.96847*10^7 z^10-1.72986*10^7 z^12+5.89295*10^6 z^14),0.00163124 y z (6435. -285285. z^2+3.59459*10^6 z^4-1.96847*10^7 z^6+5.46796*10^7 z^8-8.05282*10^7 z^10+5.98799*10^7 z^12-1.76788*10^7 z^14),0.0000494541 (6435. -875160. z^2+1.93994*10^7 z^4-1.62955*10^8 z^6+6.69279*10^8 z^8-1.48729*10^9 z^10+1.82531*10^9 z^12-1.16338*10^9 z^14+3.0054*10^8 z^16),0.000815618 x z (6435. -285285. z^2+3.59459*10^6 z^4-1.96847*10^7 z^6+5.46796*10^7 z^8-8.05282*10^7 z^10+5.98799*10^7 z^12-1.76788*10^7 z^14),0.00223366 (x^2-1. y^2) (-143.+19019. z^2-399399. z^4+3.06206*10^6 z^6-1.09359*10^7 z^8+1.96847*10^7 z^10-1.72986*10^7 z^12+5.89295*10^6 z^14),-0.0364299 x (x^2-3. y^2) z (143. -6006. z^2+69069. z^4-328900. z^6+740025. z^8-780390. z^10+310155. z^12),0.0293707 (x^4-6. x^2 y^2+y^4) (11. -1386. z^2+26565. z^4-177100. z^6+512325. z^8-660330. z^10+310155. z^12),-0.0222022 x (x^4-10. x^2 y^2+5. y^4) z (-231.+8855. z^2-88550. z^4+341550. z^6-550275. z^8+310155. z^10),0.0156993 (x^6-15. x^4 y^2+15. x^2 y^4-1. y^6) (-21.+2415. z^2-40250. z^4+217350. z^6-450225. z^8+310155. z^10),-0.238092 x (x^6-21. x^4 y^2+35. x^2 y^4-7. y^6) z (21. -700. z^2+5670. z^4-15660. z^6+13485. z^8),0.0486003 (x^8-28. x^6 y^2+70. x^4 y^4-28. x^2 y^6+y^8) (7. -700. z^2+9450. z^4-36540. z^6+40455. z^8),-0.137462 x (x^8-36. x^6 y^2+126. x^4 y^4-84. x^2 y^6+9. y^8) z (-35.+945. z^2-5481. z^4+8091. z^6),0.0713257 (x^10-45. x^8 y^2+210. x^6 y^4-210. x^4 y^6+45. x^2 y^8-1. y^10) (-5.+405. z^2-3915. z^4+8091. z^6),-0.302609 x (x^10-55. x^8 y^2+330. x^6 y^4-462. x^4 y^6+165. x^2 y^8-11. y^10) z (15. -290. z^2+899. z^4),0.127876 (x^12-66. x^10 y^2+495. x^8 y^4-924. x^6 y^6+495. x^4 y^8-66. x^2 y^10+y^12) (3. -174. z^2+899. z^4),-1.37727 x (x^12-78. x^10 y^2+715. x^8 y^4-1716. x^6 y^6+1287. x^4 y^8-286. x^2 y^10+13. y^12) z (-3.+31. z^2),0.435529 (x^14-91. x^12 y^2+1001. x^10 y^4-3003. x^8 y^6+3003. x^6 y^8-1001. x^4 y^10+91. x^2 y^12-1. y^14) (-1.+31. z^2),-3.42936 x (x^14-105. x^12 y^2+1365. x^10 y^4-5005. x^8 y^6+6435. x^6 y^8-3003. x^4 y^10+455. x^2 y^12-15. y^14) z,0.606231 (x^16-120. x^14 y^2+1820. x^12 y^4-8008. x^10 y^6+12870. x^8 y^8-8008. x^6 y^10+1820. x^4 y^12-120. x^2 y^14+y^16)'
for eq in eqs.split(','):
    print(sub_pows(mparse(eq)))
# eqs = []
# with open('eq.text', 'r') as f:
#     for s in f.readlines():
#         integral = lambdify(['a', 'b', 'c', 'k'], mparse(s))
#         eqs.append(integral)
